<html>
    <head>
       <title>Login</title>
       <meta name="viewport" content="width=device-width, initial-scale=1">
       <style>
        body{
            margin: auto;
            padding: auto;
            background: linear-gradient(320deg,#2C3E50, #4CA1AF 82%);
            width: 100%;
            height: 100%;
            margin: 10%;

        }
       #container{
        width: 60%;
        height: 100%%;
        border-radius: 15px;
        background: linear-gradient(-180deg, white,ghostwhite);
        opacity: .9;   
        box-shadow: -1px -3px 27px 5px rgb(189, 189, 189) inset;

       }

       h2{
           text-align: center;
           font-size: 235%;
       }
        table{
        margin: auto;
        width:85%;
        height:85%;
        border-radius:15px;
        
        }
        table, th, td {
        border-collapse: collapse;
        text-align: center;
        }
        input{
            margin-left: 40%;
        width: 22%;
        height: 8%;
        text-align: center;
        font-size: 205%;
        border-radius: 10px;
        }


        .sub{
            
            color:black;
            display:inline-block;
            width: 75%;
            height:75%;
            vertical-align: top;
           
            margin:12%
        }

           td{
            border-bottom: 2px solid red;
            font-size: 189%;
            box-shadow: -1px -3px 27px 5px rgb(189, 189, 189) inset;
            background-color:whitesmoke;
            border: 2px solid black;
            width:10%;
            height: 10%;
            }

       </style>
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
       <script type="text/javascript">
           $(document).ready(function(){
               var board =[[0,0,0],
               [0,0,0],
               [0,0,0]];
            $('#inputanswer').hide(); 
            function equation(difficulty){
                var num1 = Math.floor(Math.random()*10)+1;
                var num2 = 11;
                while(num2>num1){
                 num2 = Math.floor(Math.random()*10)+1;
                }
                var signs = ['+','-','x','/']
                var sign = (Math.floor(Math.random()*difficulty))
                var eq = num1 +' '+ signs[sign]+' '+ num2;
                var ans = 0;
                if (sign ==1){
                    ans = num1 - num2;
                }
                else if (sign == 0){
                    ans = num1 +num2;
                }
                else if (sign == 2){
                    ans = num1 * num2;
                }
                else if (sign == 3){
                    ans = Math.round((num1/num2)*100)/100;
                }
                var square = {
                    'equation': eq,
                    'answer' : ans,
                }

                return square;
            }

            var str = ""; 
            for(var i = 0;i<3;i++){
                str +='<tr>'
                for(var j = 0; j<3;j++){
                    var e = equation(3)
                    str += '<td class = '+e['answer']+' id = '+i+''+j+'>'+e['equation']+'</td>'
                }
            str+='</tr>'
            }
            var tdselected = [];

            $('table').html(str);

            $('td').click(function(){
                
                $('#'+tdselected.pop()).css('background-color','whitesmoke');
                $('h2').empty();
                $('input').val('');

                tdselected.push($(this).attr('id'));

                $('#inputanswer').show();

                $('h2').append($(this).text());
                $(this).css('background-color','aqua')
                var answer = $(this).attr('class');
                
                    
                $('#inputanswer').keyup(function(){
                    console.log("ANSER",answer,"INPUT",$('#inputanswer').val() )
       
                    if($('#inputanswer').val() == answer){
                        var correctCell = tdselected.pop()
                        $('#'+correctCell).html('<h1>&#215;</h1>');
                        board[correctCell[0]][correctCell[1]] = 'x';
                        
                        for(var i =0; i<3;i++){
                            if(board[i][0] == 'x' && board[i][1] == 'x' && board[i][2]=='x'){
                                console.log('X Wins')
                            }
                            if(board[0][i] == 'x' && board[1][i] == 'x' && board[2][i]=='x'){
                                console.log('X Wins')
                            }
                            
                        }
                            if(board[0][0] == 'x' && board[1][1] == 'x' && board[2][2]=='x'){
                                console.log('X Wins')
                            }
                            if(board[2][0] == 'x' && board[1][1] == 'x' && board[0][2]=='x'){
                                console.log('X Wins')
                            }

                            for(var i =0; i<3;i++){
                            if(board[i][0] == 'o' && board[i][1] == 'o' && board[i][2]=='o'){
                                console.log('O Wins')
                            }
                            if(board[0][i] == 'o' && board[1][i] == 'o' && board[2][i]=='o'){
                                console.log('O Wins')
                            }
                            
                        }
                            if(board[0][0] == 'o' && board[1][1] == 'o' && board[2][2]=='o'){
                                console.log('O Wins')
                            }
                            if(board[2][0] == 'o' && board[1][1] == 'o' && board[0][2]=='o'){
                                console.log('O Wins')
                            }
                        var x =0;
                        while(x == 0){
                            var rand1 = Math.floor(Math.random()*3);
                            var rand2 = Math.floor(Math.random()*3);
                            if(board[rand1][rand2] ==0){
                                board[rand1][rand2]= 'o';
                            
                                
                                $('#'+rand1+""+rand2).html('<h1>&Omicron;</h1>');
                                $('#'+rand1+""+rand2).css('background-color','tomato')
                                x = 1;
                            }
                            
                        }
                    }


                    });
                         

            });
     
        })
        </script>

    </head>
    <body>

            <div id = 'container'>
                
                <div class ='sub'>
                    
                     <table>
                     </table>  
                     <div class ='inputForm'>
                            
                                <h2></h2>
                                <input type = "text" id = 'inputanswer'>
        
                    </div>  
                    
                </div>
                
              </div>
              
          </body>
      </html>
      